<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Mastodon on hoshinotsuyoshi.com</title>
    <link>https://hoshinotsuyoshi.com/tags/mastodon/index.xml</link>
    <description>Recent content in Mastodon on hoshinotsuyoshi.com</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja-jp</language>
    <copyright>All rights reserved - 2016</copyright>
    <atom:link href="https://hoshinotsuyoshi.com/tags/mastodon/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>è¤‡æ•°mastodonã‚’è€ƒãˆã‚‹ ğŸ˜   ğŸ˜   ğŸ˜</title>
      <link>https://hoshinotsuyoshi.com/post/multi-mastodon-poor/</link>
      <pubDate>Fri, 28 Apr 2017 14:16:36 +0900</pubDate>
      
      <guid>https://hoshinotsuyoshi.com/post/multi-mastodon-poor/</guid>
      <description>&lt;p&gt;terraformã®ç·´ç¿’ãŒã¦ã‚‰ã€è¤‡æ•°ã®mastodonã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ğŸ˜ã‚’ç«‹ã¦ã¦ã¿ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;

&lt;p&gt;Redisã¨Postgresã®é‹ç”¨ã‚’ãƒ©ã‚¯ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ElastiCacheã¨RDSã‚’ä½¿ã†ã“ã¨ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã—ã‹ã—ã€&lt;strong&gt;ãŒã‚“ã°ã£ã¦RDSã‚’1å°ã§é‹ç”¨&lt;/strong&gt;ã—ãŸã¨ã—ã¦ã‚‚ã€
ä»¥ä¸‹ã®ã‚ˆã†ã«ã€Redisã ã‘ã§3ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ç›®ã§38ãƒ‰ãƒ«ã‚‚ã‹ã‹ã£ã¦ã—ã¾ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;# ğŸ˜&lt;/th&gt;
&lt;th&gt;ElastiCache&lt;/th&gt;
&lt;th&gt;RDS&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1å°ç›®&lt;/td&gt;
&lt;td&gt;$0/mo.(åˆå¹´åº¦ç„¡æ–™æ )&lt;/td&gt;
&lt;td&gt;$0/mo.(åˆå¹´åº¦ç„¡æ–™æ )&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;2å°ç›®&lt;/td&gt;
&lt;td&gt;$19/mo. (ç„¡æ–™æ  + 1å°)&lt;/td&gt;
&lt;td&gt;$0/mo.(ç„¡æ–™æ 1å°ã§ãŒã‚“ã°ã‚‹)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;3å°ç›®&lt;/td&gt;
&lt;td&gt;$38/mo.(ç„¡æ–™æ  + 2å°)&lt;/td&gt;
&lt;td&gt;$0/mo.(ç„¡æ–™æ 1å°ã§ãŒã‚“ã°ã‚‹)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&#34;ã‚±ãƒã‚±ãƒä½œæˆ¦&#34;&gt;ã‚±ãƒã‚±ãƒä½œæˆ¦&lt;/h2&gt;

&lt;p&gt;ãã“ã§ã€&lt;strong&gt;Redisã‚‚1å°ã ã‘&lt;/strong&gt;ã«ã—ã¦ã—ã¾ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;# ğŸ˜&lt;/th&gt;
&lt;th&gt;ElastiCache&lt;/th&gt;
&lt;th&gt;RDS&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1å°ç›®&lt;/td&gt;
&lt;td&gt;$0/mo.(åˆå¹´åº¦ç„¡æ–™æ )&lt;/td&gt;
&lt;td&gt;$0/mo.(åˆå¹´åº¦ç„¡æ–™æ )&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;2å°ç›®&lt;/td&gt;
&lt;td&gt;$0/mo.(ç„¡æ–™æ 1å°ã§ãŒã‚“ã°ã‚‹)&lt;/td&gt;
&lt;td&gt;$0/mo.(ç„¡æ–™æ 1å°ã§ãŒã‚“ã°ã‚‹)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;3å°ç›®&lt;/td&gt;
&lt;td&gt;$0/mo.(ç„¡æ–™æ 1å°ã§ãŒã‚“ã°ã‚‹)&lt;/td&gt;
&lt;td&gt;$0/mo.(ç„¡æ–™æ 1å°ã§ãŒã‚“ã°ã‚‹)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;ãã®ä»–ã¯ã“ã‚“ãªæ§‹æˆã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img alt=&#34;slack&#34; src=&#34;https://hoshinotsuyoshi.com/images/cloudcraft-mastodon.png&#34; width=1600&gt;&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã§EC2ä»£ã ã‘ã«ãªã£ãŸã‚â™¡ ã¨æ€ã£ãŸã¨ã“ã‚ã€ãã‚“ãªã«ã†ã¾ãã¯ã„ãã¾ã›ã‚“ã§ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;å‹•ä½œç¢ºèªã—ãŸã¨ã“ã‚ã€&lt;strong&gt;ã©ã†ã‚‚ğŸ˜ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒä»–ã®ğŸ˜ã«å½±éŸ¿ã‚’ä¸ãˆã¦ã—ã¾ã£ã¦ã„ã‚‹&lt;/strong&gt;ã€ã€&lt;/p&gt;

&lt;h2 id=&#34;ã‚±ãƒã‚±ãƒä½œæˆ¦ãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ©ã‚¦ãƒ³ãƒ‰&#34;&gt;ã‚±ãƒã‚±ãƒä½œæˆ¦ãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ©ã‚¦ãƒ³ãƒ‰&lt;/h2&gt;

&lt;p&gt;ã“ã†ã„ã†ãµã†ã«ã‚„ã£ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-diff&#34;&gt;--- a/config/initializers/redis.rb
+++ b/config/initializers/redis.rb
@@ -4,5 +4,6 @@ Redis.current = Redis.new(
   host: ENV.fetch(&#39;REDIS_HOST&#39;) { &#39;localhost&#39; },
   port: ENV.fetch(&#39;REDIS_PORT&#39;) { 6379 },
   password: ENV.fetch(&#39;REDIS_PASSWORD&#39;) { false },
+  db: ENV.fetch(&#39;REDIS_DB&#39;) { 0 }.to_i,
   driver: :hiredis
 )
diff --git a/streaming/index.js b/streaming/index.js
index a1e7eaca..29ded9e2 100644
--- a/streaming/index.js
+++ b/streaming/index.js
@@ -39,7 +39,8 @@ const wss    = new WebSocket.Server({ server })
 const redisClient = redis.createClient({
   host:     process.env.REDIS_HOST     || &#39;127.0.0.1&#39;,
   port:     process.env.REDIS_PORT     || 6379,
-  password: process.env.REDIS_PASSWORD
+  password: process.env.REDIS_PASSWORD,
+  db:       process.env.REDIS_DB || 0
 })

 const subs = {}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;REDIS_DBã¨ã„ã†ç’°å¢ƒå¤‰æ•°ã‚’èª•ç”Ÿã•ã›dbã‚’éš”é›¢ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã§ã„ã¾ã‚“ã¨ã“å¤§ä¸ˆå¤«ã ã‘ã©ã€redisè©³ã—ããªã„ã—ã€ä½•ã‹é–“é•ã£ã¦ã„ã‚‹æ°—ã‚‚ã™ã‚‹ğŸ²ä¿è¨¼ã¯ã—ãªã„&lt;/p&gt;

&lt;p&gt;ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã”ã¨ã«0,1,2,3&amp;hellip;ã¨å€¤ã‚’å…¥ã‚Œã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®ã¸ã‚“ã®åˆ¶å¾¡ã‚‚terraformã§ã‚„ã‚‹ã€‚&lt;/p&gt;

&lt;h3 id=&#34;ã¾ã¨ã‚&#34;&gt;âœã¾ã¨ã‚&lt;/h3&gt;

&lt;p&gt;terraformæ¥½ã—ã„ã§ã™&lt;/p&gt;</description>
    </item>
    
  </channel>
</rss>
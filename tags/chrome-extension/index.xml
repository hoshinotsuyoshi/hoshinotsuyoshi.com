<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Chrome Extension on hoshinotsuyoshi.com</title>
    <link>https://hoshinotsuyoshi.com/tags/chrome-extension/index.xml</link>
    <description>Recent content in Chrome Extension on hoshinotsuyoshi.com</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja-jp</language>
    <copyright>All rights reserved - 2016</copyright>
    <atom:link href="https://hoshinotsuyoshi.com/tags/chrome-extension/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>chrome extensionæ›¸ã„ã¦ã¦æ„Ÿå‹•ã—ãŸã“ã¨(1)</title>
      <link>https://hoshinotsuyoshi.com/post/souieba_chrome_const/</link>
      <pubDate>Fri, 06 Jan 2017 07:38:47 +0900</pubDate>
      
      <guid>https://hoshinotsuyoshi.com/post/souieba_chrome_const/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://hoshinotsuyoshi.com/post/jobcan_flex_chrome/&#34;&gt;ä»Šæœˆã‚ã¨ã©ã‚Œãã‚‰ã„åƒã‘ã°ã‚ˆã„ã‹è¨ˆç®—ã™ã‚‹Chromeæ‹¡å¼µæ›¸ã„ã¦ã„ã‚‹ Â· hoshinotsuyoshi.com&lt;/a&gt;
ã®ç¶šãã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;

&lt;p&gt;æ„Ÿå‹•ã—ãŸã“ã¨ã‚·ãƒªãƒ¼ã‚ºã€‚&lt;/p&gt;

&lt;p&gt;çµŒç·¯ã¯&lt;a href=&#34;https://hoshinotsuyoshi.com/post/jobcan_flex_chrome/&#34;&gt;å‰å›ã®è¨˜äº‹&lt;/a&gt;
ã‚’ãŠèª­ã¿ãã ã•ã„ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã¡ã‚‰ãŒã„ã¾ã®ã¨ã“å‹•ã„ã¦ã‚‹ã‚³ãƒ¼ãƒ‰ã®å…¨ã¦ã€‚122è¡Œãªã®ã§ã™ãŒ&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;console.log(&#39;start!&#39;);
const page = &#39;https://ssl.jobcan.jp/employee/attendance?code=[ã“ã“ã«codeã‚’åŸ‹ã‚ã‚‹]&#39;;

//--------------------------
//æ‰€å®šåŠ´åƒæ—¥æ•°
const standardWorkdaysCount = (doc) =&amp;gt; {
    const result = doc.getElementById(&#39;search-result&#39;);
    const table  = result.querySelector(&amp;quot;div.infotpl&amp;quot;).querySelectorAll(&amp;quot;table.left&amp;quot;)[0];
    const td     = table.querySelectorAll(&amp;quot;tr&amp;quot;)[4].querySelector(&amp;quot;td&amp;quot;);
    return parseFloat(td.innerText.replace(&#39; &#39;,&#39;&#39;).replace(&#39;æ—¥&#39;, &#39;&#39;));
};

//æ‰€å®šåŠ´åƒæ™‚é–“
//æ‰€å®šåŠ´åƒæ—¥æ•°ã«8ã‚’æ›ã‘ãŸã‚‚ã®
const standardWorkHoursCount = (doc) =&amp;gt; {
    return(standardWorkdaysCount(doc) * 8);
};

//å‹¤å‹™ä¸­ã‹ã©ã†ã‹
const isWorking = (doc) =&amp;gt; {
    const text = doc.body.textContent;
    return !!text.match(/å‹¤å‹™ä¸­/);
}

//ä»Šã¾ã§ã®å®Ÿè³ªåŠ´åƒæ™‚é–“
const workedHoursCount = (doc) =&amp;gt; {
    const result    = doc.getElementById(&#39;search-result&#39;);
    const table     = result.querySelector(&amp;quot;div.infotpl&amp;quot;).querySelectorAll(&amp;quot;table.left&amp;quot;)[1];
    const td        = table.querySelectorAll(&amp;quot;tr&amp;quot;)[1].querySelector(&amp;quot;td&amp;quot;);
    const timeArray = td.innerText.split(&#39;:&#39;)
    const hour      = parseInt(timeArray[0]);
    const minute    = parseInt(timeArray[1]);
    return(hour + minute / 60.0);
};

//å®ŸåŠ´åƒæ™‚é–“ã«æœ‰çµ¦åˆ†ã®åŠ´åƒæ™‚é–“ã‚’è¶³ã—ãŸã‚‚ã®ã€‚å…¨ä¼‘=8æ™‚é–“ã€åŠä¼‘=4æ™‚é–“
const excessWorkedHoursCount = (doc) =&amp;gt; {
    const workedHours = workedHoursCount(doc);
    const paidHoridaysSpent1 = paidHoridaysSpentTable(doc)[&#39;æœ‰ä¼‘(å…¨ä¼‘)&#39;] || 0;
    const paidHoridaysSpent2 = paidHoridaysSpentTable(doc)[&#39;æœ‰ä¼‘(AMä¼‘)&#39;] || 0;
    const paidHoridaysSpent3 = paidHoridaysSpentTable(doc)[&#39;æœ‰ä¼‘(PMä¼‘)&#39;] || 0;
    return(workedHours + paidHoridaysSpent1*8 + paidHoridaysSpent2*8 + paidHoridaysSpent3*8);
};

//å®Ÿåƒæ—¥æ•°
const workdaysCount = (doc) =&amp;gt; {
    const result    = doc.getElementById(&#39;search-result&#39;);
    const table     = result.querySelector(&amp;quot;div.infotpl&amp;quot;).querySelectorAll(&amp;quot;table.right&amp;quot;)[0];
    const td        = table.querySelectorAll(&amp;quot;tr&amp;quot;)[1].querySelector(&amp;quot;td&amp;quot;);
    return parseFloat(td.innerText);
};

//æœ‰çµ¦æ¶ˆåŒ–ãƒ†ãƒ¼ãƒ–ãƒ«
// {
//   &amp;quot;æœ‰ä¼‘(å…¨ä¼‘)&amp;quot;: 2,
//   &amp;quot;æœ‰ä¼‘(PMä¼‘)&amp;quot;: 0.5
// }
// ãªã©ã®å€¤ãŒè¿”ã‚‹ã€‚
const paidHoridaysSpentTable = (doc) =&amp;gt; {
    const result = doc.getElementById(&#39;search-result&#39;);
    const table  = result.querySelector(&amp;quot;div.infotpl&amp;quot;).querySelectorAll(&amp;quot;table.right&amp;quot;)[1];
    const fifth  = table.querySelectorAll(&amp;quot;tbody&amp;quot;)[1];
    const trs    = fifth.querySelectorAll(&amp;quot;tr&amp;quot;);
    const object = {}
    const merge  = (element) =&amp;gt; {
        const key   = element.querySelector(&#39;th&#39;).innerText;
        const value = parseFloat(element.querySelector(&#39;td&#39;).innerText);
        object[key] = value;
        return null;
    }
    trs.forEach(merge);
    return(object);
}

// ä»Šæœˆã®æ®‹ã‚Šå‡ºå‹¤å¯èƒ½æ—¥æ•°
const restWorkdaysCount = (doc) =&amp;gt; {
    const paidHoridaysSpent = paidHoridaysSpentTable(doc)[&#39;æœ‰ä¼‘(å…¨ä¼‘)&#39;] || 0;
    return(standardWorkdaysCount(doc) - workdaysCount(doc) - paidHoridaysSpent);
}

// 1æ—¥ã‚ãŸã‚Šä½•æ™‚é–“åƒã‘ã°ã„ã„ã‹
// æ‰€å®šåŠ´åƒæ™‚é–“ã‹ã‚‰å®Ÿè³ªåŠ´åƒæ™‚é–“ã‚’å¼•ã„ãŸå€¤ã‚’æ®‹ã‚Šã®å‡ºå‹¤å¯èƒ½æ—¥æ•°ã§å‰²ã£ãŸã‚‚ã®ã€‚
const requiredWorkHoursCount = (doc) =&amp;gt; {
    return((standardWorkHoursCount(doc) - excessWorkedHoursCount(doc)) / restWorkdaysCount(doc));
}

//--------------------------

const parser = new DOMParser();

// https://syncer.jp/javascript-reverse-reference/processing-decimal-point
// å°æ•°ç‚¹nä½ã¾ã§ã‚’æ®‹ã™é–¢æ•°
// number=å¯¾è±¡ã®æ•°å€¤
// n=æ®‹ã—ãŸã„å°æ•°ç‚¹ä»¥ä¸‹ã®æ¡æ•°
const floatFormat = (number, n) =&amp;gt; {
    const pow = Math.pow(10, n);
    return Math.round(number*pow)/pow;
}

const badgeText = (doc) =&amp;gt; {
    return floatFormat(requiredWorkHoursCount(doc),2).toString();
}

const main = () =&amp;gt; {
    fetch(page,{credentials:&amp;quot;include&amp;quot;})
        .then((_response) =&amp;gt; {
            fetch(page,{credentials:&amp;quot;include&amp;quot;})
                .then((response) =&amp;gt; {
                    return response.text();
                }).then((text) =&amp;gt; {
                    const doc = parser.parseFromString(text, &#39;text/html&#39;);
                    chrome.browserAction.setBadgeText({ text: badgeText(doc) });
                })
        });
}

chrome.browserAction.onClicked.addListener((_tab) =&amp;gt; {
    console.log(&#39;clicked&#39;);
    chrome.browserAction.setBadgeText({ text: &#39;....&#39;});
    main();
});
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;
&lt;br&gt;&lt;/p&gt;

&lt;h3 id=&#34;æ„Ÿå‹•ã—ãŸã“ã¨&#34;&gt;æ„Ÿå‹•ã—ãŸã“ã¨&lt;/h3&gt;

&lt;p&gt;constã¨ã‹ã‚¢ãƒ­ãƒ¼é–¢æ•°ã¨ã‹ã‚ã‚Šã¾ã™ãŒã€ã“ã‚ŒãŒ&lt;strong&gt;babelãªã—ã§å‹•ãã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;chromeæ‹¡å¼µãªã®ã§ã€chromeã®ã“ã¨ã ã‘è€ƒãˆã‚Œã°è‰¯ã„ã®ãŒè‰¯ã„ã§ã™ã­ã€‚&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>ä»Šæœˆã‚ã¨ã©ã‚Œãã‚‰ã„åƒã‘ã°ã‚ˆã„ã‹è¨ˆç®—ã™ã‚‹Chromeæ‹¡å¼µæ›¸ã„ã¦ã„ã‚‹</title>
      <link>https://hoshinotsuyoshi.com/post/jobcan_flex_chrome/</link>
      <pubDate>Thu, 05 Jan 2017 00:50:10 +0900</pubDate>
      
      <guid>https://hoshinotsuyoshi.com/post/jobcan_flex_chrome/</guid>
      <description>&lt;p&gt;nå¹´ã¶ã‚Šã«Chromeæ‹¡å¼µã‚’æ›¸ã„ãŸã‚Šã—ã¦ã„ã¾ã™ã€‚çµŒç·¯ã«ã¤ã„ã¦è©±ã•ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;

&lt;h3 id=&#34;çµŒç·¯ã‚’3è¡Œã§&#34;&gt;çµŒç·¯ã‚’3è¡Œã§&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ãƒ•ãƒ¬ãƒƒã‚¯ã‚¹å‹¤å‹™&lt;/strong&gt;ã®ãŸã‚ã€1ãƒ¶æœˆãƒˆãƒ¼ã‚¿ãƒ«ã§ã€Œ8æ™‚é–“*å–¶æ¥­æ—¥æ•°ã€ã¶ã‚“åƒã‘ã°è‰¯ã„ã“ã¨ã«ãªã£ã¦ã„ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;å„è‡ªã€å‹¤å‹™è¡¨(&lt;a href=&#34;http://jobcan.ne.jp/&#34;&gt;ã‚¸ãƒ§ãƒ–ã‚«ãƒ³&lt;/a&gt;)ã¨ã«ã‚‰ã‚ã£ã“ã—ã€ä»Šæœˆã‚ã¨ä½•æ™‚é–“åƒã‘ã°ã‚ˆã„ã‹è¨ˆç®—ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;ã‚¸ãƒ§ãƒ–ã‚«ãƒ³ã«ã¯ &lt;strong&gt;WebAPIãŒç„¡ã„ã€‚&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä¸Šè¨˜ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã€åŒåƒšãŒã„ã„æ„Ÿã˜ã«å‹¤å‹™è¡¨ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã™ã‚‹sinatraã‚¢ãƒ—ãƒªã‚’æ›¸ã„ãŸã®ã§ã™ãŒã€
ä»Šå›è‡ªåˆ†ã¯æ•¢ãˆã¦chromeæ‹¡å¼µç‰ˆã‚’ä½œã‚ã†ã¨æ€ã„ãŸã¡ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;h3 id=&#34;ä»Šå›ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å¯¾è±¡ã¨ãªã‚‹ãƒšãƒ¼ã‚¸-å‹¤å‹™è¡¨-ã®ãµã‚“ã„ã&#34;&gt;ä»Šå›ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å¯¾è±¡ã¨ãªã‚‹ãƒšãƒ¼ã‚¸(å‹¤å‹™è¡¨)ã®ãµã‚“ã„ã&lt;/h3&gt;

&lt;p&gt;ã“ã‚“ãªã‚“ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img alt=&#34;jobcan&#34; src=&#34;https://hoshinotsuyoshi.com/images/jobcan.png&#34; width=600&gt;&lt;/p&gt;

&lt;h3 id=&#34;é€²æ—&#34;&gt;é€²æ—&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;40%ãã‚‰ã„ã§ããŸ&lt;/strong&gt;æ°—ãŒã™ã‚‹ã€‚ä»Šã®ã¨ã“ã‚ç§ã®PCã§ã—ã‹å‹•ãã¾ã›ã‚“ğŸ™&lt;/p&gt;

&lt;h3 id=&#34;ã‚ˆã†ã™&#34;&gt;ã‚ˆã†ã™&lt;/h3&gt;

&lt;p&gt;æ‹¡å¼µã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€
è‡ªåˆ†ã®å‹¤å‹™è¡¨ã®ãƒ‡ãƒ¼ã‚¿ãŒèª­ã¿è¾¼ã¾ã‚Œã€ã€Œä»Šæœˆã®æ®‹ã‚Šã¯1æ—¥å¹³å‡ã©ã®ãã‚‰ã„åƒã‘ã°è‰¯ã„ã‹ã€ã‚’æ•™ãˆã¦ãã‚Œã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img alt=&#34;extension&#34; src=&#34;https://hoshinotsuyoshi.com/images/jobcan_extension_anime.gif&#34;&gt;&lt;/p&gt;

&lt;p&gt;ä¸Šè¨˜ã®ä¾‹ã¯ã€ã€ä»Šæœˆã¯æ®‹ã‚Š1æ—¥å¹³å‡8.15æ™‚é–“åƒã‘ã°è‰¯ã„ã€ã¨ã„ã†è¨ˆç®—çµæœã‚’å‡ºåŠ›ã—ãŸæ§˜å­ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¨ã‚Šã‚ãˆãšãƒãƒƒãƒ‚(&lt;a href=&#34;https://developer.chrome.com/extensions/browserAction#badge&#34;&gt;chrome.browserAction - Google Chrome&lt;/a&gt;)ã§å®Ÿè£…ã—ã¦ã¿ãŸãŒã€
ãƒãƒƒãƒ‚ã¯å¸¸æ™‚è¡¨ç¤ºã™ã‚‹å¿…è¦ã‚ã‚‹ã‹ã‚‰ã‚¦ã‚±ãŒæ‚ªã„æ°—ãŒã™ã‚‹ã€‚å†è€ƒã®ä½™åœ°ã‚ã‚Šã€‚&lt;/p&gt;

&lt;h3 id=&#34;ã‚³ãƒ¼ãƒ‰&#34;&gt;ã‚³ãƒ¼ãƒ‰&lt;/h3&gt;

&lt;p&gt;ä»Šã®ã¨ã“ã‚éƒ¨å“åŒ–ã‚‚ã—ã¦ãŠã‚‰ãšã€ãƒ†ã‚¹ãƒˆã‚‚ç„¡ã„ã‚³ãƒ¼ãƒ‰ã§ã™ãŒã€‚&lt;/p&gt;

&lt;p&gt;&lt;blockquote class=&#34;embedly-card&#34; data-card-key=&#34;6f257114b6df4413a3f5872a7e143278&#34; data-card-type=&#34;article&#34;&gt;&lt;h4&gt;&lt;a href=&#34;https://github.com/hoshinotsuyoshi/how-many-work-time-chrome-extension/tree/it-works&#34;&gt;hoshinotsuyoshi/how-many-work-time-chrome-extension&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;how-many-work-time-chrome-extension - [WIP]ä»Šæœˆã¯ã‚ã¨ã©ã‚Œãã‚‰ã„åƒã‘ã°ã„ã„ã®ã‹ãªï¼Ÿ2&lt;/p&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;//cdn.embedly.com/widgets/platform.js&#34; charset=&#34;UTF-8&#34;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;h3 id=&#34;å±•æœ›&#34;&gt;å±•æœ›&lt;/h3&gt;

&lt;p&gt;â†“ã“ã®boilerplateãŒå‚è€ƒã«ãªã£ãŸã®ã§ã€å¼•ãç¶šãå‚è€ƒã«ã—ã¤ã¤éƒ¨å“åŒ–ã¨ãƒ†ã‚¹ãƒˆè¿½åŠ ã‚’ã‚„ã£ã¦ã¿ãŸã„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;blockquote class=&#34;embedly-card&#34; data-card-key=&#34;6f257114b6df4413a3f5872a7e143278&#34; data-card-type=&#34;article&#34;&gt;&lt;h4&gt;&lt;a href=&#34;https://github.com/jhen0409/react-chrome-extension-boilerplate&#34;&gt;jhen0409/react-chrome-extension-boilerplate&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;react-chrome-extension-boilerplate - Boilerplate for Chrome Extension React.js project&lt;/p&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;//cdn.embedly.com/widgets/platform.js&#34; charset=&#34;UTF-8&#34;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;h3 id=&#34;ã¾ã¨ã‚&#34;&gt;âœã¾ã¨ã‚&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;boilerplateèª­ã‚“ã§ã‚‹ã¨ã„ã‚ã„ã‚ã¨å·¥å¤«ãŒã‚ã£ã¦æ¥½ã—ã„ã€‚&lt;/li&gt;
&lt;li&gt;ã¨ã„ã†ã‹æ‹¡å¼µæ›¸ãã®çµæ§‹æ¥½ã—ã„ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆèª­ã‚“ã§ã‚‹ã¨ã„ã‚ã„ã‚ã§ãã‚‹ã“ã¨ã«æ°—ã¥ãã€‚&lt;/li&gt;
&lt;li&gt;æœªå®ŒğŸŠã§ã™ã€‚ã„ã¤ã‹ã¾ã¨ã‚ã‚‰ã‚ŒãŸã‚‰ã„ã„ãªã€‚&lt;/li&gt;
&lt;/ul&gt;</description>
    </item>
    
  </channel>
</rss>